(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(85)}])},85:function(e,t,n){"use strict";n.r(t),n.d(t,{currentRPMAtom:function(){return c}});var r=n(5893),i=n(5103),l=n(8583),a=n(7294);let c=(0,i.cn)(0);t.default=()=>{let[e,t]=(0,l.KO)(c),[n,i]=(0,a.useState)(null),o=e=>{let n=e.target.value,r=null==n?void 0:n.getUint16(1,!0);if(null==n){console.error("No value received from characteristic");return}console.log("rpmValue",r),void 0!==r&&t(r)};async function s(){try{let e=await navigator.bluetooth.requestDevice({filters:[{services:["00001816-0000-1000-8000-00805f9b34fb"]}],optionalServices:["0000180f-0000-1000-8000-00805f9b34fb"]});console.log("1",e);let t=await e.gatt.connect();console.log("2",t);let n=await t.getPrimaryService("00001816-0000-1000-8000-00805f9b34fb");console.log("3",n);let r=await t.getPrimaryService("0000180f-0000-1000-8000-00805f9b34fb"),l=await r.getCharacteristic("00002a19-0000-1000-8000-00805f9b34fb"),a=await l.readValue(),c=a.getUint8(0);console.log("Battery Level:",c),i(c);let s=document.getElementById("batteryLevel");null!==s&&(s.textContent="バッテリー残量: ".concat(c,"%")),await new Promise(e=>setTimeout(e,1e3));let u=await n.getCharacteristic("00002a5b-0000-1000-8000-00805f9b34fb");console.log("4",u),u.addEventListener("characteristicvaluechanged",o),await u.startNotifications(),console.log("5",u)}catch(e){console.error("Error:",e)}}return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"ケーデンスセンサーの読み取り"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:" 1.センサーに接続ボタンをクリックするとデバイス検索が入る"}),(0,r.jsx)("p",{children:"2.ペア設定をクリックするとデバイスが読み取られる"}),(0,r.jsx)("p",{children:"3.回転するとデータが更新されていく"})]}),(0,r.jsx)("button",{onClick:s,children:"センサーに接続"}),null!==n?(0,r.jsxs)("span",{id:"batteryLevel",children:["バッテリー残量: ",n,"%"]}):(0,r.jsx)("span",{id:"batteryLevel",children:"バッテリー残量: ---%"}),(0,r.jsxs)("p",{children:["RPM:",e]})]})}}},function(e){e.O(0,[583,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);